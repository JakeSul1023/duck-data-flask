{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\n// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* global document */\nimport { FlyToInterpolator, WebMercatorViewport, _GlobeViewport, _deepEqual as deepEqual, _applyStyles as applyStyles, _removeStyles as removeStyles } from '@deck.gl/core';\nimport { render } from 'preact';\nexport class CompassWidget {\n  constructor(props) {\n    this.id = 'compass';\n    this.placement = 'top-left';\n    this.viewId = null;\n    this.viewports = {};\n    this.id = props.id ?? this.id;\n    this.viewId = props.viewId ?? this.viewId;\n    this.placement = props.placement ?? this.placement;\n    this.props = {\n      ...props,\n      transitionDuration: props.transitionDuration ?? 200,\n      label: props.label ?? 'Reset Compass',\n      style: props.style ?? {}\n    };\n  }\n  setProps(props) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    const oldProps = this.props;\n    const el = this.element;\n    if (el) {\n      if (oldProps.className !== props.className) {\n        if (oldProps.className) el.classList.remove(oldProps.className);\n        if (props.className) el.classList.add(props.className);\n      }\n      if (!deepEqual(oldProps.style, props.style, 1)) {\n        removeStyles(el, oldProps.style);\n        applyStyles(el, props.style);\n      }\n    }\n    Object.assign(this.props, props);\n    this.update();\n  }\n  onViewportChange(viewport) {\n    // no need to update if viewport is the same\n    if (!viewport.equals(this.viewports[viewport.id])) {\n      this.viewports[viewport.id] = viewport;\n      this.update();\n    }\n  }\n  onAdd({\n    deck\n  }) {\n    const {\n      style,\n      className\n    } = this.props;\n    const element = document.createElement('div');\n    element.classList.add('deck-widget', 'deck-widget-compass');\n    if (className) element.classList.add(className);\n    applyStyles(element, style);\n    this.deck = deck;\n    this.element = element;\n    this.update();\n    return element;\n  }\n  getRotation(viewport) {\n    if (viewport instanceof WebMercatorViewport) {\n      return [-viewport.bearing, viewport.pitch];\n    } else if (viewport instanceof _GlobeViewport) {\n      return [0, Math.max(-80, Math.min(80, viewport.latitude))];\n    }\n    return [0, 0];\n  }\n  update() {\n    const viewId = this.viewId || Object.values(this.viewports)[0]?.id || 'default-view';\n    const viewport = this.viewports[viewId];\n    const [rz, rx] = this.getRotation(viewport);\n    const element = this.element;\n    if (!element) {\n      return;\n    }\n    const ui = _jsx(\"div\", {\n      className: \"deck-widget-button\",\n      style: {\n        perspective: 100\n      },\n      children: _jsx(\"button\", {\n        type: \"button\",\n        onClick: () => {\n          for (const viewport of Object.values(this.viewports)) {\n            this.handleCompassReset(viewport);\n          }\n        },\n        title: this.props.label,\n        style: {\n          transform: `rotateX(${rx}deg)`\n        },\n        children: _jsx(\"svg\", {\n          fill: \"none\",\n          width: \"100%\",\n          height: \"100%\",\n          viewBox: \"0 0 26 26\",\n          children: _jsxs(\"g\", {\n            transform: `rotate(${rz},13,13)`,\n            children: [_jsx(\"path\", {\n              d: \"M10 13.0001L12.9999 5L15.9997 13.0001H10Z\",\n              fill: \"var(--icon-compass-north-color, #F05C44)\"\n            }), _jsx(\"path\", {\n              d: \"M16.0002 12.9999L13.0004 21L10.0005 12.9999H16.0002Z\",\n              fill: \"var(--icon-compass-south-color, #C2C2CC)\"\n            })]\n          })\n        })\n      })\n    });\n    render(ui, element);\n  }\n  onRemove() {\n    this.deck = undefined;\n    this.element = undefined;\n  }\n  handleCompassReset(viewport) {\n    const viewId = this.viewId || viewport.id || 'default-view';\n    if (viewport instanceof WebMercatorViewport) {\n      const nextViewState = {\n        ...viewport,\n        bearing: 0,\n        ...(this.getRotation(viewport)[0] === 0 ? {\n          pitch: 0\n        } : {}),\n        transitionDuration: this.props.transitionDuration,\n        transitionInterpolator: new FlyToInterpolator()\n      };\n      // @ts-ignore Using private method temporary until there's a public one\n      this.deck._onViewStateChange({\n        viewId,\n        viewState: nextViewState,\n        interactionState: {}\n      });\n    }\n  }\n}","map":{"version":3,"names":["FlyToInterpolator","WebMercatorViewport","_GlobeViewport","_deepEqual","deepEqual","_applyStyles","applyStyles","_removeStyles","removeStyles","render","CompassWidget","constructor","props","id","placement","viewId","viewports","transitionDuration","label","style","setProps","oldProps","el","element","className","classList","remove","add","Object","assign","update","onViewportChange","viewport","equals","onAdd","deck","document","createElement","getRotation","bearing","pitch","Math","max","min","latitude","values","rz","rx","ui","_jsx","perspective","children","type","onClick","handleCompassReset","title","transform","fill","width","height","viewBox","_jsxs","d","onRemove","undefined","nextViewState","transitionInterpolator","_onViewStateChange","viewState","interactionState"],"sources":["C:\\Users\\jakes\\Documents\\GitHub\\duck-data-flask\\duck-data-webpage\\node_modules\\@deck.gl\\widgets\\src\\compass-widget.tsx"],"sourcesContent":["// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\n/* global document */\nimport {\n  FlyToInterpolator,\n  WebMercatorViewport,\n  _GlobeViewport,\n  _deepEqual as deepEqual,\n  _applyStyles as applyStyles,\n  _removeStyles as removeStyles\n} from '@deck.gl/core';\nimport type {Deck, Viewport, Widget, WidgetPlacement} from '@deck.gl/core';\nimport {render} from 'preact';\n\nexport type CompassWidgetProps = {\n  id?: string;\n  /**\n   * Widget positioning within the view. Default 'top-left'.\n   */\n  placement?: WidgetPlacement;\n  /**\n   * View to attach to and interact with. Required when using multiple views.\n   */\n  viewId?: string | null;\n  /**\n   * Tooltip message.\n   */\n  label?: string;\n  /**\n   * Bearing and pitch reset transition duration in ms.\n   */\n  transitionDuration?: number;\n  /**\n   * CSS inline style overrides.\n   */\n  style?: Partial<CSSStyleDeclaration>;\n  /**\n   * Additional CSS class.\n   */\n  className?: string;\n};\n\nexport class CompassWidget implements Widget<CompassWidgetProps> {\n  id = 'compass';\n  props: CompassWidgetProps;\n  placement: WidgetPlacement = 'top-left';\n  viewId?: string | null = null;\n  viewports: {[id: string]: Viewport} = {};\n  deck?: Deck<any>;\n  element?: HTMLDivElement;\n\n  constructor(props: CompassWidgetProps) {\n    this.id = props.id ?? this.id;\n    this.viewId = props.viewId ?? this.viewId;\n    this.placement = props.placement ?? this.placement;\n\n    this.props = {\n      ...props,\n      transitionDuration: props.transitionDuration ?? 200,\n      label: props.label ?? 'Reset Compass',\n      style: props.style ?? {}\n    };\n  }\n\n  setProps(props: Partial<CompassWidgetProps>) {\n    this.placement = props.placement ?? this.placement;\n    this.viewId = props.viewId ?? this.viewId;\n    const oldProps = this.props;\n    const el = this.element;\n    if (el) {\n      if (oldProps.className !== props.className) {\n        if (oldProps.className) el.classList.remove(oldProps.className);\n        if (props.className) el.classList.add(props.className);\n      }\n\n      if (!deepEqual(oldProps.style, props.style, 1)) {\n        removeStyles(el, oldProps.style);\n        applyStyles(el, props.style);\n      }\n    }\n\n    Object.assign(this.props, props);\n    this.update();\n  }\n\n  onViewportChange(viewport: Viewport) {\n    // no need to update if viewport is the same\n    if (!viewport.equals(this.viewports[viewport.id])) {\n      this.viewports[viewport.id] = viewport;\n      this.update();\n    }\n  }\n\n  onAdd({deck}: {deck: Deck<any>}): HTMLDivElement {\n    const {style, className} = this.props;\n    const element = document.createElement('div');\n    element.classList.add('deck-widget', 'deck-widget-compass');\n    if (className) element.classList.add(className);\n    applyStyles(element, style);\n    this.deck = deck;\n    this.element = element;\n    this.update();\n    return element;\n  }\n\n  getRotation(viewport?: Viewport) {\n    if (viewport instanceof WebMercatorViewport) {\n      return [-viewport.bearing, viewport.pitch];\n    } else if (viewport instanceof _GlobeViewport) {\n      return [0, Math.max(-80, Math.min(80, viewport.latitude))];\n    }\n    return [0, 0];\n  }\n\n  private update() {\n    const viewId = this.viewId || Object.values(this.viewports)[0]?.id || 'default-view';\n    const viewport = this.viewports[viewId];\n    const [rz, rx] = this.getRotation(viewport);\n    const element = this.element;\n    if (!element) {\n      return;\n    }\n    const ui = (\n      <div className=\"deck-widget-button\" style={{perspective: 100}}>\n        <button\n          type=\"button\"\n          onClick={() => {\n            for (const viewport of Object.values(this.viewports)) {\n              this.handleCompassReset(viewport);\n            }\n          }}\n          title={this.props.label}\n          style={{transform: `rotateX(${rx}deg)`}}\n        >\n          <svg fill=\"none\" width=\"100%\" height=\"100%\" viewBox=\"0 0 26 26\">\n            <g transform={`rotate(${rz},13,13)`}>\n              <path\n                d=\"M10 13.0001L12.9999 5L15.9997 13.0001H10Z\"\n                fill=\"var(--icon-compass-north-color, #F05C44)\"\n              />\n              <path\n                d=\"M16.0002 12.9999L13.0004 21L10.0005 12.9999H16.0002Z\"\n                fill=\"var(--icon-compass-south-color, #C2C2CC)\"\n              />\n            </g>\n          </svg>\n        </button>\n      </div>\n    );\n    render(ui, element);\n  }\n\n  onRemove() {\n    this.deck = undefined;\n    this.element = undefined;\n  }\n\n  handleCompassReset(viewport: Viewport) {\n    const viewId = this.viewId || viewport.id || 'default-view';\n    if (viewport instanceof WebMercatorViewport) {\n      const nextViewState = {\n        ...viewport,\n        bearing: 0,\n        ...(this.getRotation(viewport)[0] === 0 ? {pitch: 0} : {}),\n        transitionDuration: this.props.transitionDuration,\n        transitionInterpolator: new FlyToInterpolator()\n      };\n      // @ts-ignore Using private method temporary until there's a public one\n      this.deck._onViewStateChange({viewId, viewState: nextViewState, interactionState: {}});\n    }\n  }\n}\n"],"mappings":";AAAA;AACA;AACA;AAEA;AACA,SACEA,iBAAiB,EACjBC,mBAAmB,EACnBC,cAAc,EACdC,UAAU,IAAIC,SAAS,EACvBC,YAAY,IAAIC,WAAW,EAC3BC,aAAa,IAAIC,YAAY,QACxB,eAAe;AAEtB,SAAQC,MAAM,QAAO,QAAQ;AA8B7B,OAAM,MAAOC,aAAa;EASxBC,YAAYC,KAAyB;IARrC,KAAAC,EAAE,GAAG,SAAS;IAEd,KAAAC,SAAS,GAAoB,UAAU;IACvC,KAAAC,MAAM,GAAmB,IAAI;IAC7B,KAAAC,SAAS,GAA6B,EAAE;IAKtC,IAAI,CAACH,EAAE,GAAGD,KAAK,CAACC,EAAE,IAAI,IAAI,CAACA,EAAE;IAC7B,IAAI,CAACE,MAAM,GAAGH,KAAK,CAACG,MAAM,IAAI,IAAI,CAACA,MAAM;IACzC,IAAI,CAACD,SAAS,GAAGF,KAAK,CAACE,SAAS,IAAI,IAAI,CAACA,SAAS;IAElD,IAAI,CAACF,KAAK,GAAG;MACX,GAAGA,KAAK;MACRK,kBAAkB,EAAEL,KAAK,CAACK,kBAAkB,IAAI,GAAG;MACnDC,KAAK,EAAEN,KAAK,CAACM,KAAK,IAAI,eAAe;MACrCC,KAAK,EAAEP,KAAK,CAACO,KAAK,IAAI;KACvB;EACH;EAEAC,QAAQA,CAACR,KAAkC;IACzC,IAAI,CAACE,SAAS,GAAGF,KAAK,CAACE,SAAS,IAAI,IAAI,CAACA,SAAS;IAClD,IAAI,CAACC,MAAM,GAAGH,KAAK,CAACG,MAAM,IAAI,IAAI,CAACA,MAAM;IACzC,MAAMM,QAAQ,GAAG,IAAI,CAACT,KAAK;IAC3B,MAAMU,EAAE,GAAG,IAAI,CAACC,OAAO;IACvB,IAAID,EAAE,EAAE;MACN,IAAID,QAAQ,CAACG,SAAS,KAAKZ,KAAK,CAACY,SAAS,EAAE;QAC1C,IAAIH,QAAQ,CAACG,SAAS,EAAEF,EAAE,CAACG,SAAS,CAACC,MAAM,CAACL,QAAQ,CAACG,SAAS,CAAC;QAC/D,IAAIZ,KAAK,CAACY,SAAS,EAAEF,EAAE,CAACG,SAAS,CAACE,GAAG,CAACf,KAAK,CAACY,SAAS,CAAC;MACxD;MAEA,IAAI,CAACpB,SAAS,CAACiB,QAAQ,CAACF,KAAK,EAAEP,KAAK,CAACO,KAAK,EAAE,CAAC,CAAC,EAAE;QAC9CX,YAAY,CAACc,EAAE,EAAED,QAAQ,CAACF,KAAK,CAAC;QAChCb,WAAW,CAACgB,EAAE,EAAEV,KAAK,CAACO,KAAK,CAAC;MAC9B;IACF;IAEAS,MAAM,CAACC,MAAM,CAAC,IAAI,CAACjB,KAAK,EAAEA,KAAK,CAAC;IAChC,IAAI,CAACkB,MAAM,EAAE;EACf;EAEAC,gBAAgBA,CAACC,QAAkB;IACjC;IACA,IAAI,CAACA,QAAQ,CAACC,MAAM,CAAC,IAAI,CAACjB,SAAS,CAACgB,QAAQ,CAACnB,EAAE,CAAC,CAAC,EAAE;MACjD,IAAI,CAACG,SAAS,CAACgB,QAAQ,CAACnB,EAAE,CAAC,GAAGmB,QAAQ;MACtC,IAAI,CAACF,MAAM,EAAE;IACf;EACF;EAEAI,KAAKA,CAAC;IAACC;EAAI,CAAoB;IAC7B,MAAM;MAAChB,KAAK;MAAEK;IAAS,CAAC,GAAG,IAAI,CAACZ,KAAK;IACrC,MAAMW,OAAO,GAAGa,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC7Cd,OAAO,CAACE,SAAS,CAACE,GAAG,CAAC,aAAa,EAAE,qBAAqB,CAAC;IAC3D,IAAIH,SAAS,EAAED,OAAO,CAACE,SAAS,CAACE,GAAG,CAACH,SAAS,CAAC;IAC/ClB,WAAW,CAACiB,OAAO,EAAEJ,KAAK,CAAC;IAC3B,IAAI,CAACgB,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACZ,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACO,MAAM,EAAE;IACb,OAAOP,OAAO;EAChB;EAEAe,WAAWA,CAACN,QAAmB;IAC7B,IAAIA,QAAQ,YAAY/B,mBAAmB,EAAE;MAC3C,OAAO,CAAC,CAAC+B,QAAQ,CAACO,OAAO,EAAEP,QAAQ,CAACQ,KAAK,CAAC;IAC5C,CAAC,MAAM,IAAIR,QAAQ,YAAY9B,cAAc,EAAE;MAC7C,OAAO,CAAC,CAAC,EAAEuC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,EAAED,IAAI,CAACE,GAAG,CAAC,EAAE,EAAEX,QAAQ,CAACY,QAAQ,CAAC,CAAC,CAAC;IAC5D;IACA,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC;EACf;EAEQd,MAAMA,CAAA;IACZ,MAAMf,MAAM,GAAG,IAAI,CAACA,MAAM,IAAIa,MAAM,CAACiB,MAAM,CAAC,IAAI,CAAC7B,SAAS,CAAC,CAAC,CAAC,CAAC,EAAEH,EAAE,IAAI,cAAc;IACpF,MAAMmB,QAAQ,GAAG,IAAI,CAAChB,SAAS,CAACD,MAAM,CAAC;IACvC,MAAM,CAAC+B,EAAE,EAAEC,EAAE,CAAC,GAAG,IAAI,CAACT,WAAW,CAACN,QAAQ,CAAC;IAC3C,MAAMT,OAAO,GAAG,IAAI,CAACA,OAAO;IAC5B,IAAI,CAACA,OAAO,EAAE;MACZ;IACF;IACA,MAAMyB,EAAE,GACNC,IAAA;MAAKzB,SAAS,EAAC,oBAAoB;MAACL,KAAK,EAAE;QAAC+B,WAAW,EAAE;MAAG,CAAC;MAAAC,QAAA,EAC3DF,IAAA;QACEG,IAAI,EAAC,QAAQ;QACbC,OAAO,EAAEA,CAAA,KAAK;UACZ,KAAK,MAAMrB,QAAQ,IAAIJ,MAAM,CAACiB,MAAM,CAAC,IAAI,CAAC7B,SAAS,CAAC,EAAE;YACpD,IAAI,CAACsC,kBAAkB,CAACtB,QAAQ,CAAC;UACnC;QACF,CAAC;QACDuB,KAAK,EAAE,IAAI,CAAC3C,KAAK,CAACM,KAAK;QACvBC,KAAK,EAAE;UAACqC,SAAS,EAAE,WAAWT,EAAE;QAAM,CAAC;QAAAI,QAAA,EAEvCF,IAAA;UAAKQ,IAAI,EAAC,MAAM;UAACC,KAAK,EAAC,MAAM;UAACC,MAAM,EAAC,MAAM;UAACC,OAAO,EAAC,WAAW;UAAAT,QAAA,EAC7DU,KAAA;YAAGL,SAAS,EAAE,UAAUV,EAAE,SAAS;YAAAK,QAAA,GACjCF,IAAA;cACEa,CAAC,EAAC,2CAA2C;cAC7CL,IAAI,EAAC;YAA0C,EAC/C,EACFR,IAAA;cACEa,CAAC,EAAC,sDAAsD;cACxDL,IAAI,EAAC;YAA0C,EAC/C;UAAA;QACA;MACA;IACC,EAEZ;IACDhD,MAAM,CAACuC,EAAE,EAAEzB,OAAO,CAAC;EACrB;EAEAwC,QAAQA,CAAA;IACN,IAAI,CAAC5B,IAAI,GAAG6B,SAAS;IACrB,IAAI,CAACzC,OAAO,GAAGyC,SAAS;EAC1B;EAEAV,kBAAkBA,CAACtB,QAAkB;IACnC,MAAMjB,MAAM,GAAG,IAAI,CAACA,MAAM,IAAIiB,QAAQ,CAACnB,EAAE,IAAI,cAAc;IAC3D,IAAImB,QAAQ,YAAY/B,mBAAmB,EAAE;MAC3C,MAAMgE,aAAa,GAAG;QACpB,GAAGjC,QAAQ;QACXO,OAAO,EAAE,CAAC;QACV,IAAI,IAAI,CAACD,WAAW,CAACN,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG;UAACQ,KAAK,EAAE;QAAC,CAAC,GAAG,EAAE,CAAC;QAC1DvB,kBAAkB,EAAE,IAAI,CAACL,KAAK,CAACK,kBAAkB;QACjDiD,sBAAsB,EAAE,IAAIlE,iBAAiB;OAC9C;MACD;MACA,IAAI,CAACmC,IAAI,CAACgC,kBAAkB,CAAC;QAACpD,MAAM;QAAEqD,SAAS,EAAEH,aAAa;QAAEI,gBAAgB,EAAE;MAAE,CAAC,CAAC;IACxF;EACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}