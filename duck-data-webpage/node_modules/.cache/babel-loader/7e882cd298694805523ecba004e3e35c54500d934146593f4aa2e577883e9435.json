{"ast":null,"code":"// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\n/** Abstract hash base class */\nexport class Hash {\n  constructor(options = {}) {\n    this.hashBatches = this.hashBatches.bind(this);\n  }\n  async preload() {\n    return;\n  }\n  async *hashBatches(asyncIterator, encoding = 'base64') {\n    const arrayBuffers = [];\n    for await (const arrayBuffer of asyncIterator) {\n      arrayBuffers.push(arrayBuffer);\n      yield arrayBuffer;\n    }\n    const output = await this.concatenate(arrayBuffers);\n    const hash = await this.hash(output, encoding);\n    this.options.crypto?.onEnd?.({\n      hash\n    });\n  }\n  // HELPERS\n  async concatenate(asyncIterator) {\n    return await concatenateArrayBuffersAsync(asyncIterator);\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}