{"ast":null,"code":"// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// ISC License\n// Copyright(c) 2019, Michael Fogleman, Vladimir Agafonkin\n// @ts-nocheck\n/* eslint-disable complexity, max-params, max-statements, max-depth, no-constant-condition */\nexport default class Delatin {\n  constructor(data, width, height = width) {\n    this.data = data; // height data\n    this.width = width;\n    this.height = height;\n    this.coords = []; // vertex coordinates (x, y)\n    this.triangles = []; // mesh triangle indices\n    // additional triangle data\n    this._halfedges = [];\n    this._candidates = [];\n    this._queueIndices = [];\n    this._queue = []; // queue of added triangles\n    this._errors = [];\n    this._rms = [];\n    this._pending = []; // triangles pending addition to queue\n    this._pendingLen = 0;\n    this._rmsSum = 0;\n    const x1 = width - 1;\n    const y1 = height - 1;\n    const p0 = this._addPoint(0, 0);\n    const p1 = this._addPoint(x1, 0);\n    const p2 = this._addPoint(0, y1);\n    const p3 = this._addPoint(x1, y1);\n    // add initial two triangles\n    const t0 = this._addTriangle(p3, p0, p2, -1, -1, -1);\n    this._addTriangle(p0, p3, p1, t0, -1, -1);\n    this._flush();\n  }\n  // refine the mesh until its maximum error gets below the given one\n  run(maxError = 1) {\n    while (this.getMaxError() > maxError) {\n      this.refine();\n    }\n  }\n  // refine the mesh with a single point\n  refine() {\n    this._step();\n    this._flush();\n  }\n  // max error of the current mesh\n  getMaxError() {\n    return this._errors[0];\n  }\n  // root-mean-square deviation of the current mesh\n  getRMSD() {\n    return this._rmsSum > 0 ? Math.sqrt(this._rmsSum / (this.width * this.height)) : 0;\n  }\n  // height value at a given position\n  heightAt(x, y) {\n    return this.data[this.width * y + x];\n  }\n  // rasterize and queue all triangles that got added or updated in _step\n  _flush() {\n    const coords = this.coords;\n    for (let i = 0; i < this._pendingLen; i++) {\n      const t = this._pending[i];\n      // rasterize triangle to find maximum pixel error\n      const a = 2 * this.triangles[t * 3 + 0];\n      const b = 2 * this.triangles[t * 3 + 1];\n      const c = 2 * this.triangles[t * 3 + 2];\n      this._findCandidate(coords[a], coords[a + 1], coords[b], coords[b + 1], coords[c], coords[c + 1], t);\n    }\n    this._pendingLen = 0;\n  }\n  // rasterize a triangle, find its max error, and queue it for processing\n  _findCandidate(p0x, p0y, p1x, p1y, p2x, p2y, t) {\n    // triangle bounding box\n    const minX = Math.min(p0x, p1x, p2x);\n    const minY = Math.min(p0y, p1y, p2y);\n    const maxX = Math.max(p0x, p1x, p2x);\n    const maxY = Math.max(p0y, p1y, p2y);\n    // forward differencing variables\n    let w00 = orient(p1x, p1y, p2x, p2y, minX, minY);\n    let w01 = orient(p2x, p2y, p0x, p0y, minX, minY);\n    let w02 = orient(p0x, p0y, p1x, p1y, minX, minY);\n    const a01 = p1y - p0y;\n    const b01 = p0x - p1x;\n    const a12 = p2y - p1y;\n    const b12 = p1x - p2x;\n    const a20 = p0y - p2y;\n    const b20 = p2x - p0x;\n    // pre-multiplied z values at vertices\n    const a = orient(p0x, p0y, p1x, p1y, p2x, p2y);\n    const z0 = this.heightAt(p0x, p0y) / a;\n    const z1 = this.heightAt(p1x, p1y) / a;\n    const z2 = this.heightAt(p2x, p2y) / a;\n    // iterate over pixels in bounding box\n    let maxError = 0;\n    let mx = 0;\n    let my = 0;\n    let rms = 0;\n    for (let y = minY; y <= maxY; y++) {\n      // compute starting offset\n      let dx = 0;\n      if (w00 < 0 && a12 !== 0) {\n        dx = Math.max(dx, Math.floor(-w00 / a12));\n      }\n      if (w01 < 0 && a20 !== 0) {\n        dx = Math.max(dx, Math.floor(-w01 / a20));\n      }\n      if (w02 < 0 && a01 !== 0) {\n        dx = Math.max(dx, Math.floor(-w02 / a01));\n      }\n      let w0 = w00 + a12 * dx;\n      let w1 = w01 + a20 * dx;\n      let w2 = w02 + a01 * dx;\n      let wasInside = false;\n      for (let x = minX + dx; x <= maxX; x++) {\n        // check if inside triangle\n        if (w0 >= 0 && w1 >= 0 && w2 >= 0) {\n          wasInside = true;\n          // compute z using barycentric coordinates\n          const z = z0 * w0 + z1 * w1 + z2 * w2;\n          const dz = Math.abs(z - this.heightAt(x, y));\n          rms += dz * dz;\n          if (dz > maxError) {\n            maxError = dz;\n            mx = x;\n            my = y;\n          }\n        } else if (wasInside) {\n          break;\n        }\n        w0 += a12;\n        w1 += a20;\n        w2 += a01;\n      }\n      w00 += b12;\n      w01 += b20;\n      w02 += b01;\n    }\n    if (mx === p0x && my === p0y || mx === p1x && my === p1y || mx === p2x && my === p2y) {\n      maxError = 0;\n    }\n    // update triangle metadata\n    this._candidates[2 * t] = mx;\n    this._candidates[2 * t + 1] = my;\n    this._rms[t] = rms;\n    // add triangle to priority queue\n    this._queuePush(t, maxError, rms);\n  }\n  // process the next triangle in the queue, splitting it with a new point\n  _step() {\n    // pop triangle with highest error from priority queue\n    const t = this._queuePop();\n    const e0 = t * 3 + 0;\n    const e1 = t * 3 + 1;\n    const e2 = t * 3 + 2;\n    const p0 = this.triangles[e0];\n    const p1 = this.triangles[e1];\n    const p2 = this.triangles[e2];\n    const ax = this.coords[2 * p0];\n    const ay = this.coords[2 * p0 + 1];\n    const bx = this.coords[2 * p1];\n    const by = this.coords[2 * p1 + 1];\n    const cx = this.coords[2 * p2];\n    const cy = this.coords[2 * p2 + 1];\n    const px = this._candidates[2 * t];\n    const py = this._candidates[2 * t + 1];\n    const pn = this._addPoint(px, py);\n    if (orient(ax, ay, bx, by, px, py) === 0) {\n      this._handleCollinear(pn, e0);\n    } else if (orient(bx, by, cx, cy, px, py) === 0) {\n      this._handleCollinear(pn, e1);\n    } else if (orient(cx, cy, ax, ay, px, py) === 0) {\n      this._handleCollinear(pn, e2);\n    } else {\n      const h0 = this._halfedges[e0];\n      const h1 = this._halfedges[e1];\n      const h2 = this._halfedges[e2];\n      const t0 = this._addTriangle(p0, p1, pn, h0, -1, -1, e0);\n      const t1 = this._addTriangle(p1, p2, pn, h1, -1, t0 + 1);\n      const t2 = this._addTriangle(p2, p0, pn, h2, t0 + 2, t1 + 1);\n      this._legalize(t0);\n      this._legalize(t1);\n      this._legalize(t2);\n    }\n  }\n  // add coordinates for a new vertex\n  _addPoint(x, y) {\n    const i = this.coords.length >> 1;\n    this.coords.push(x, y);\n    return i;\n  }\n  // add or update a triangle in the mesh\n  _addTriangle(a, b, c, ab, bc, ca, e = this.triangles.length) {\n    const t = e / 3; // new triangle index\n    // add triangle vertices\n    this.triangles[e + 0] = a;\n    this.triangles[e + 1] = b;\n    this.triangles[e + 2] = c;\n    // add triangle halfedges\n    this._halfedges[e + 0] = ab;\n    this._halfedges[e + 1] = bc;\n    this._halfedges[e + 2] = ca;\n    // link neighboring halfedges\n    if (ab >= 0) {\n      this._halfedges[ab] = e + 0;\n    }\n    if (bc >= 0) {\n      this._halfedges[bc] = e + 1;\n    }\n    if (ca >= 0) {\n      this._halfedges[ca] = e + 2;\n    }\n    // init triangle metadata\n    this._candidates[2 * t + 0] = 0;\n    this._candidates[2 * t + 1] = 0;\n    this._queueIndices[t] = -1;\n    this._rms[t] = 0;\n    // add triangle to pending queue for later rasterization\n    this._pending[this._pendingLen++] = t;\n    // return first halfedge index\n    return e;\n  }\n  _legalize(a) {\n    // if the pair of triangles doesn't satisfy the Delaunay condition\n    // (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n    // then do the same check/flip recursively for the new pair of triangles\n    //\n    //           pl                    pl\n    //          /||\\                  /  \\\n    //       al/ || \\bl            al/    \\a\n    //        /  ||  \\              /      \\\n    //       /  a||b  \\    flip    /___ar___\\\n    //     p0\\   ||   /p1   =>   p0\\---bl---/p1\n    //        \\  ||  /              \\      /\n    //       ar\\ || /br             b\\    /br\n    //          \\||/                  \\  /\n    //           pr                    pr\n    const b = this._halfedges[a];\n    if (b < 0) {\n      return;\n    }\n    const a0 = a - a % 3;\n    const b0 = b - b % 3;\n    const al = a0 + (a + 1) % 3;\n    const ar = a0 + (a + 2) % 3;\n    const bl = b0 + (b + 2) % 3;\n    const br = b0 + (b + 1) % 3;\n    const p0 = this.triangles[ar];\n    const pr = this.triangles[a];\n    const pl = this.triangles[al];\n    const p1 = this.triangles[bl];\n    const coords = this.coords;\n    if (!inCircle(coords[2 * p0], coords[2 * p0 + 1], coords[2 * pr], coords[2 * pr + 1], coords[2 * pl], coords[2 * pl + 1], coords[2 * p1], coords[2 * p1 + 1])) {\n      return;\n    }\n    const hal = this._halfedges[al];\n    const har = this._halfedges[ar];\n    const hbl = this._halfedges[bl];\n    const hbr = this._halfedges[br];\n    this._queueRemove(a0 / 3);\n    this._queueRemove(b0 / 3);\n    const t0 = this._addTriangle(p0, p1, pl, -1, hbl, hal, a0);\n    const t1 = this._addTriangle(p1, p0, pr, t0, har, hbr, b0);\n    this._legalize(t0 + 1);\n    this._legalize(t1 + 2);\n  }\n  // handle a case where new vertex is on the edge of a triangle\n  _handleCollinear(pn, a) {\n    const a0 = a - a % 3;\n    const al = a0 + (a + 1) % 3;\n    const ar = a0 + (a + 2) % 3;\n    const p0 = this.triangles[ar];\n    const pr = this.triangles[a];\n    const pl = this.triangles[al];\n    const hal = this._halfedges[al];\n    const har = this._halfedges[ar];\n    const b = this._halfedges[a];\n    if (b < 0) {\n      const t0 = this._addTriangle(pn, p0, pr, -1, har, -1, a0);\n      const t1 = this._addTriangle(p0, pn, pl, t0, -1, hal);\n      this._legalize(t0 + 1);\n      this._legalize(t1 + 2);\n      return;\n    }\n    const b0 = b - b % 3;\n    const bl = b0 + (b + 2) % 3;\n    const br = b0 + (b + 1) % 3;\n    const p1 = this.triangles[bl];\n    const hbl = this._halfedges[bl];\n    const hbr = this._halfedges[br];\n    this._queueRemove(b0 / 3);\n    const t0 = this._addTriangle(p0, pr, pn, har, -1, -1, a0);\n    const t1 = this._addTriangle(pr, p1, pn, hbr, -1, t0 + 1, b0);\n    const t2 = this._addTriangle(p1, pl, pn, hbl, -1, t1 + 1);\n    const t3 = this._addTriangle(pl, p0, pn, hal, t0 + 2, t2 + 1);\n    this._legalize(t0);\n    this._legalize(t1);\n    this._legalize(t2);\n    this._legalize(t3);\n  }\n  // priority queue methods\n  _queuePush(t, error, rms) {\n    const i = this._queue.length;\n    this._queueIndices[t] = i;\n    this._queue.push(t);\n    this._errors.push(error);\n    this._rmsSum += rms;\n    this._queueUp(i);\n  }\n  _queuePop() {\n    const n = this._queue.length - 1;\n    this._queueSwap(0, n);\n    this._queueDown(0, n);\n    return this._queuePopBack();\n  }\n  _queuePopBack() {\n    const t = this._queue.pop();\n    this._errors.pop();\n    this._rmsSum -= this._rms[t];\n    this._queueIndices[t] = -1;\n    return t;\n  }\n  _queueRemove(t) {\n    const i = this._queueIndices[t];\n    if (i < 0) {\n      const it = this._pending.indexOf(t);\n      if (it !== -1) {\n        this._pending[it] = this._pending[--this._pendingLen];\n      } else {\n        throw new Error('Broken triangulation (something went wrong).');\n      }\n      return;\n    }\n    const n = this._queue.length - 1;\n    if (n !== i) {\n      this._queueSwap(i, n);\n      if (!this._queueDown(i, n)) {\n        this._queueUp(i);\n      }\n    }\n    this._queuePopBack();\n  }\n  _queueLess(i, j) {\n    return this._errors[i] > this._errors[j];\n  }\n  _queueSwap(i, j) {\n    const pi = this._queue[i];\n    const pj = this._queue[j];\n    this._queue[i] = pj;\n    this._queue[j] = pi;\n    this._queueIndices[pi] = j;\n    this._queueIndices[pj] = i;\n    const e = this._errors[i];\n    this._errors[i] = this._errors[j];\n    this._errors[j] = e;\n  }\n  _queueUp(j0) {\n    let j = j0;\n    while (true) {\n      const i = j - 1 >> 1;\n      if (i === j || !this._queueLess(j, i)) {\n        break;\n      }\n      this._queueSwap(i, j);\n      j = i;\n    }\n  }\n  _queueDown(i0, n) {\n    let i = i0;\n    while (true) {\n      const j1 = 2 * i + 1;\n      if (j1 >= n || j1 < 0) {\n        break;\n      }\n      const j2 = j1 + 1;\n      let j = j1;\n      if (j2 < n && this._queueLess(j2, j1)) {\n        j = j2;\n      }\n      if (!this._queueLess(j, i)) {\n        break;\n      }\n      this._queueSwap(i, j);\n      i = j;\n    }\n    return i > i0;\n  }\n}\nfunction orient(ax, ay, bx, by, cx, cy) {\n  return (bx - cx) * (ay - cy) - (by - cy) * (ax - cx);\n}\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n  const dx = ax - px;\n  const dy = ay - py;\n  const ex = bx - px;\n  const ey = by - py;\n  const fx = cx - px;\n  const fy = cy - py;\n  const ap = dx * dx + dy * dy;\n  const bp = ex * ex + ey * ey;\n  const cp = fx * fx + fy * fy;\n  return dx * (ey * cp - bp * fy) - dy * (ex * cp - bp * fx) + ap * (ex * fy - ey * fx) < 0;\n}","map":{"version":3,"names":["Delatin","constructor","data","width","height","coords","triangles","_halfedges","_candidates","_queueIndices","_queue","_errors","_rms","_pending","_pendingLen","_rmsSum","x1","y1","p0","_addPoint","p1","p2","p3","t0","_addTriangle","_flush","run","maxError","getMaxError","refine","_step","getRMSD","Math","sqrt","heightAt","x","y","i","t","a","b","c","_findCandidate","p0x","p0y","p1x","p1y","p2x","p2y","minX","min","minY","maxX","max","maxY","w00","orient","w01","w02","a01","b01","a12","b12","a20","b20","z0","z1","z2","mx","my","rms","dx","floor","w0","w1","w2","wasInside","z","dz","abs","_queuePush","_queuePop","e0","e1","e2","ax","ay","bx","by","cx","cy","px","py","pn","_handleCollinear","h0","h1","h2","t1","t2","_legalize","length","push","ab","bc","ca","e","a0","b0","al","ar","bl","br","pr","pl","inCircle","hal","har","hbl","hbr","_queueRemove","t3","error","_queueUp","n","_queueSwap","_queueDown","_queuePopBack","pop","it","indexOf","Error","_queueLess","j","pi","pj","j0","i0","j1","j2","dy","ex","ey","fx","fy","ap","bp","cp"],"sources":["C:/Users/jakes/Documents/GitHub/duck-data-flask/duck-data-webpage/node_modules/@loaders.gl/terrain/dist/lib/delatin/index.js"],"sourcesContent":["// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// ISC License\n// Copyright(c) 2019, Michael Fogleman, Vladimir Agafonkin\n// @ts-nocheck\n/* eslint-disable complexity, max-params, max-statements, max-depth, no-constant-condition */\nexport default class Delatin {\n    constructor(data, width, height = width) {\n        this.data = data; // height data\n        this.width = width;\n        this.height = height;\n        this.coords = []; // vertex coordinates (x, y)\n        this.triangles = []; // mesh triangle indices\n        // additional triangle data\n        this._halfedges = [];\n        this._candidates = [];\n        this._queueIndices = [];\n        this._queue = []; // queue of added triangles\n        this._errors = [];\n        this._rms = [];\n        this._pending = []; // triangles pending addition to queue\n        this._pendingLen = 0;\n        this._rmsSum = 0;\n        const x1 = width - 1;\n        const y1 = height - 1;\n        const p0 = this._addPoint(0, 0);\n        const p1 = this._addPoint(x1, 0);\n        const p2 = this._addPoint(0, y1);\n        const p3 = this._addPoint(x1, y1);\n        // add initial two triangles\n        const t0 = this._addTriangle(p3, p0, p2, -1, -1, -1);\n        this._addTriangle(p0, p3, p1, t0, -1, -1);\n        this._flush();\n    }\n    // refine the mesh until its maximum error gets below the given one\n    run(maxError = 1) {\n        while (this.getMaxError() > maxError) {\n            this.refine();\n        }\n    }\n    // refine the mesh with a single point\n    refine() {\n        this._step();\n        this._flush();\n    }\n    // max error of the current mesh\n    getMaxError() {\n        return this._errors[0];\n    }\n    // root-mean-square deviation of the current mesh\n    getRMSD() {\n        return this._rmsSum > 0 ? Math.sqrt(this._rmsSum / (this.width * this.height)) : 0;\n    }\n    // height value at a given position\n    heightAt(x, y) {\n        return this.data[this.width * y + x];\n    }\n    // rasterize and queue all triangles that got added or updated in _step\n    _flush() {\n        const coords = this.coords;\n        for (let i = 0; i < this._pendingLen; i++) {\n            const t = this._pending[i];\n            // rasterize triangle to find maximum pixel error\n            const a = 2 * this.triangles[t * 3 + 0];\n            const b = 2 * this.triangles[t * 3 + 1];\n            const c = 2 * this.triangles[t * 3 + 2];\n            this._findCandidate(coords[a], coords[a + 1], coords[b], coords[b + 1], coords[c], coords[c + 1], t);\n        }\n        this._pendingLen = 0;\n    }\n    // rasterize a triangle, find its max error, and queue it for processing\n    _findCandidate(p0x, p0y, p1x, p1y, p2x, p2y, t) {\n        // triangle bounding box\n        const minX = Math.min(p0x, p1x, p2x);\n        const minY = Math.min(p0y, p1y, p2y);\n        const maxX = Math.max(p0x, p1x, p2x);\n        const maxY = Math.max(p0y, p1y, p2y);\n        // forward differencing variables\n        let w00 = orient(p1x, p1y, p2x, p2y, minX, minY);\n        let w01 = orient(p2x, p2y, p0x, p0y, minX, minY);\n        let w02 = orient(p0x, p0y, p1x, p1y, minX, minY);\n        const a01 = p1y - p0y;\n        const b01 = p0x - p1x;\n        const a12 = p2y - p1y;\n        const b12 = p1x - p2x;\n        const a20 = p0y - p2y;\n        const b20 = p2x - p0x;\n        // pre-multiplied z values at vertices\n        const a = orient(p0x, p0y, p1x, p1y, p2x, p2y);\n        const z0 = this.heightAt(p0x, p0y) / a;\n        const z1 = this.heightAt(p1x, p1y) / a;\n        const z2 = this.heightAt(p2x, p2y) / a;\n        // iterate over pixels in bounding box\n        let maxError = 0;\n        let mx = 0;\n        let my = 0;\n        let rms = 0;\n        for (let y = minY; y <= maxY; y++) {\n            // compute starting offset\n            let dx = 0;\n            if (w00 < 0 && a12 !== 0) {\n                dx = Math.max(dx, Math.floor(-w00 / a12));\n            }\n            if (w01 < 0 && a20 !== 0) {\n                dx = Math.max(dx, Math.floor(-w01 / a20));\n            }\n            if (w02 < 0 && a01 !== 0) {\n                dx = Math.max(dx, Math.floor(-w02 / a01));\n            }\n            let w0 = w00 + a12 * dx;\n            let w1 = w01 + a20 * dx;\n            let w2 = w02 + a01 * dx;\n            let wasInside = false;\n            for (let x = minX + dx; x <= maxX; x++) {\n                // check if inside triangle\n                if (w0 >= 0 && w1 >= 0 && w2 >= 0) {\n                    wasInside = true;\n                    // compute z using barycentric coordinates\n                    const z = z0 * w0 + z1 * w1 + z2 * w2;\n                    const dz = Math.abs(z - this.heightAt(x, y));\n                    rms += dz * dz;\n                    if (dz > maxError) {\n                        maxError = dz;\n                        mx = x;\n                        my = y;\n                    }\n                }\n                else if (wasInside) {\n                    break;\n                }\n                w0 += a12;\n                w1 += a20;\n                w2 += a01;\n            }\n            w00 += b12;\n            w01 += b20;\n            w02 += b01;\n        }\n        if ((mx === p0x && my === p0y) || (mx === p1x && my === p1y) || (mx === p2x && my === p2y)) {\n            maxError = 0;\n        }\n        // update triangle metadata\n        this._candidates[2 * t] = mx;\n        this._candidates[2 * t + 1] = my;\n        this._rms[t] = rms;\n        // add triangle to priority queue\n        this._queuePush(t, maxError, rms);\n    }\n    // process the next triangle in the queue, splitting it with a new point\n    _step() {\n        // pop triangle with highest error from priority queue\n        const t = this._queuePop();\n        const e0 = t * 3 + 0;\n        const e1 = t * 3 + 1;\n        const e2 = t * 3 + 2;\n        const p0 = this.triangles[e0];\n        const p1 = this.triangles[e1];\n        const p2 = this.triangles[e2];\n        const ax = this.coords[2 * p0];\n        const ay = this.coords[2 * p0 + 1];\n        const bx = this.coords[2 * p1];\n        const by = this.coords[2 * p1 + 1];\n        const cx = this.coords[2 * p2];\n        const cy = this.coords[2 * p2 + 1];\n        const px = this._candidates[2 * t];\n        const py = this._candidates[2 * t + 1];\n        const pn = this._addPoint(px, py);\n        if (orient(ax, ay, bx, by, px, py) === 0) {\n            this._handleCollinear(pn, e0);\n        }\n        else if (orient(bx, by, cx, cy, px, py) === 0) {\n            this._handleCollinear(pn, e1);\n        }\n        else if (orient(cx, cy, ax, ay, px, py) === 0) {\n            this._handleCollinear(pn, e2);\n        }\n        else {\n            const h0 = this._halfedges[e0];\n            const h1 = this._halfedges[e1];\n            const h2 = this._halfedges[e2];\n            const t0 = this._addTriangle(p0, p1, pn, h0, -1, -1, e0);\n            const t1 = this._addTriangle(p1, p2, pn, h1, -1, t0 + 1);\n            const t2 = this._addTriangle(p2, p0, pn, h2, t0 + 2, t1 + 1);\n            this._legalize(t0);\n            this._legalize(t1);\n            this._legalize(t2);\n        }\n    }\n    // add coordinates for a new vertex\n    _addPoint(x, y) {\n        const i = this.coords.length >> 1;\n        this.coords.push(x, y);\n        return i;\n    }\n    // add or update a triangle in the mesh\n    _addTriangle(a, b, c, ab, bc, ca, e = this.triangles.length) {\n        const t = e / 3; // new triangle index\n        // add triangle vertices\n        this.triangles[e + 0] = a;\n        this.triangles[e + 1] = b;\n        this.triangles[e + 2] = c;\n        // add triangle halfedges\n        this._halfedges[e + 0] = ab;\n        this._halfedges[e + 1] = bc;\n        this._halfedges[e + 2] = ca;\n        // link neighboring halfedges\n        if (ab >= 0) {\n            this._halfedges[ab] = e + 0;\n        }\n        if (bc >= 0) {\n            this._halfedges[bc] = e + 1;\n        }\n        if (ca >= 0) {\n            this._halfedges[ca] = e + 2;\n        }\n        // init triangle metadata\n        this._candidates[2 * t + 0] = 0;\n        this._candidates[2 * t + 1] = 0;\n        this._queueIndices[t] = -1;\n        this._rms[t] = 0;\n        // add triangle to pending queue for later rasterization\n        this._pending[this._pendingLen++] = t;\n        // return first halfedge index\n        return e;\n    }\n    _legalize(a) {\n        // if the pair of triangles doesn't satisfy the Delaunay condition\n        // (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n        // then do the same check/flip recursively for the new pair of triangles\n        //\n        //           pl                    pl\n        //          /||\\                  /  \\\n        //       al/ || \\bl            al/    \\a\n        //        /  ||  \\              /      \\\n        //       /  a||b  \\    flip    /___ar___\\\n        //     p0\\   ||   /p1   =>   p0\\---bl---/p1\n        //        \\  ||  /              \\      /\n        //       ar\\ || /br             b\\    /br\n        //          \\||/                  \\  /\n        //           pr                    pr\n        const b = this._halfedges[a];\n        if (b < 0) {\n            return;\n        }\n        const a0 = a - (a % 3);\n        const b0 = b - (b % 3);\n        const al = a0 + ((a + 1) % 3);\n        const ar = a0 + ((a + 2) % 3);\n        const bl = b0 + ((b + 2) % 3);\n        const br = b0 + ((b + 1) % 3);\n        const p0 = this.triangles[ar];\n        const pr = this.triangles[a];\n        const pl = this.triangles[al];\n        const p1 = this.triangles[bl];\n        const coords = this.coords;\n        if (!inCircle(coords[2 * p0], coords[2 * p0 + 1], coords[2 * pr], coords[2 * pr + 1], coords[2 * pl], coords[2 * pl + 1], coords[2 * p1], coords[2 * p1 + 1])) {\n            return;\n        }\n        const hal = this._halfedges[al];\n        const har = this._halfedges[ar];\n        const hbl = this._halfedges[bl];\n        const hbr = this._halfedges[br];\n        this._queueRemove(a0 / 3);\n        this._queueRemove(b0 / 3);\n        const t0 = this._addTriangle(p0, p1, pl, -1, hbl, hal, a0);\n        const t1 = this._addTriangle(p1, p0, pr, t0, har, hbr, b0);\n        this._legalize(t0 + 1);\n        this._legalize(t1 + 2);\n    }\n    // handle a case where new vertex is on the edge of a triangle\n    _handleCollinear(pn, a) {\n        const a0 = a - (a % 3);\n        const al = a0 + ((a + 1) % 3);\n        const ar = a0 + ((a + 2) % 3);\n        const p0 = this.triangles[ar];\n        const pr = this.triangles[a];\n        const pl = this.triangles[al];\n        const hal = this._halfedges[al];\n        const har = this._halfedges[ar];\n        const b = this._halfedges[a];\n        if (b < 0) {\n            const t0 = this._addTriangle(pn, p0, pr, -1, har, -1, a0);\n            const t1 = this._addTriangle(p0, pn, pl, t0, -1, hal);\n            this._legalize(t0 + 1);\n            this._legalize(t1 + 2);\n            return;\n        }\n        const b0 = b - (b % 3);\n        const bl = b0 + ((b + 2) % 3);\n        const br = b0 + ((b + 1) % 3);\n        const p1 = this.triangles[bl];\n        const hbl = this._halfedges[bl];\n        const hbr = this._halfedges[br];\n        this._queueRemove(b0 / 3);\n        const t0 = this._addTriangle(p0, pr, pn, har, -1, -1, a0);\n        const t1 = this._addTriangle(pr, p1, pn, hbr, -1, t0 + 1, b0);\n        const t2 = this._addTriangle(p1, pl, pn, hbl, -1, t1 + 1);\n        const t3 = this._addTriangle(pl, p0, pn, hal, t0 + 2, t2 + 1);\n        this._legalize(t0);\n        this._legalize(t1);\n        this._legalize(t2);\n        this._legalize(t3);\n    }\n    // priority queue methods\n    _queuePush(t, error, rms) {\n        const i = this._queue.length;\n        this._queueIndices[t] = i;\n        this._queue.push(t);\n        this._errors.push(error);\n        this._rmsSum += rms;\n        this._queueUp(i);\n    }\n    _queuePop() {\n        const n = this._queue.length - 1;\n        this._queueSwap(0, n);\n        this._queueDown(0, n);\n        return this._queuePopBack();\n    }\n    _queuePopBack() {\n        const t = this._queue.pop();\n        this._errors.pop();\n        this._rmsSum -= this._rms[t];\n        this._queueIndices[t] = -1;\n        return t;\n    }\n    _queueRemove(t) {\n        const i = this._queueIndices[t];\n        if (i < 0) {\n            const it = this._pending.indexOf(t);\n            if (it !== -1) {\n                this._pending[it] = this._pending[--this._pendingLen];\n            }\n            else {\n                throw new Error('Broken triangulation (something went wrong).');\n            }\n            return;\n        }\n        const n = this._queue.length - 1;\n        if (n !== i) {\n            this._queueSwap(i, n);\n            if (!this._queueDown(i, n)) {\n                this._queueUp(i);\n            }\n        }\n        this._queuePopBack();\n    }\n    _queueLess(i, j) {\n        return this._errors[i] > this._errors[j];\n    }\n    _queueSwap(i, j) {\n        const pi = this._queue[i];\n        const pj = this._queue[j];\n        this._queue[i] = pj;\n        this._queue[j] = pi;\n        this._queueIndices[pi] = j;\n        this._queueIndices[pj] = i;\n        const e = this._errors[i];\n        this._errors[i] = this._errors[j];\n        this._errors[j] = e;\n    }\n    _queueUp(j0) {\n        let j = j0;\n        while (true) {\n            const i = (j - 1) >> 1;\n            if (i === j || !this._queueLess(j, i)) {\n                break;\n            }\n            this._queueSwap(i, j);\n            j = i;\n        }\n    }\n    _queueDown(i0, n) {\n        let i = i0;\n        while (true) {\n            const j1 = 2 * i + 1;\n            if (j1 >= n || j1 < 0) {\n                break;\n            }\n            const j2 = j1 + 1;\n            let j = j1;\n            if (j2 < n && this._queueLess(j2, j1)) {\n                j = j2;\n            }\n            if (!this._queueLess(j, i)) {\n                break;\n            }\n            this._queueSwap(i, j);\n            i = j;\n        }\n        return i > i0;\n    }\n}\nfunction orient(ax, ay, bx, by, cx, cy) {\n    return (bx - cx) * (ay - cy) - (by - cy) * (ax - cx);\n}\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n    return dx * (ey * cp - bp * fy) - dy * (ex * cp - bp * fx) + ap * (ex * fy - ey * fx) < 0;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}