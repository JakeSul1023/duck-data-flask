{"ast":null,"code":"// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { luma } from '@luma.gl/core';\nimport { AnimationLoop } from \"./animation-loop.js\";\n/** Instantiates and runs the render loop */\nexport function makeAnimationLoop(AnimationLoopTemplateCtor, props) {\n  let renderLoop = null;\n  const device = props?.device || luma.createDevice({\n    id: 'animation-loop',\n    adapters: props?.adapters,\n    createCanvasContext: true\n  });\n  // Create an animation loop;\n  const animationLoop = new AnimationLoop({\n    ...props,\n    device,\n    async onInitialize(animationProps) {\n      // @ts-expect-error abstract to prevent instantiation\n      renderLoop = new AnimationLoopTemplateCtor(animationProps);\n      // Any async loading can be handled here\n      return await renderLoop?.onInitialize(animationProps);\n    },\n    onRender: animationProps => renderLoop?.onRender(animationProps),\n    onFinalize: animationProps => renderLoop?.onFinalize(animationProps)\n  });\n  // @ts-expect-error Hack: adds info for the website to find\n  animationLoop.getInfo = () => {\n    // @ts-ignore\n    // eslint-disable-next-line no-invalid-this\n    return this.AnimationLoopTemplateCtor.info;\n  };\n  // Start the loop automatically\n  // animationLoop.start();\n  return animationLoop;\n}","map":{"version":3,"names":["luma","AnimationLoop","makeAnimationLoop","AnimationLoopTemplateCtor","props","renderLoop","device","createDevice","id","adapters","createCanvasContext","animationLoop","onInitialize","animationProps","onRender","onFinalize","getInfo","info"],"sources":["C:\\Users\\jakes\\Documents\\GitHub\\duck-data-flask\\duck-data-webpage\\node_modules\\@luma.gl\\engine\\src\\animation-loop\\make-animation-loop.ts"],"sourcesContent":["// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n\nimport {luma, Adapter} from '@luma.gl/core';\nimport {AnimationLoopTemplate} from './animation-loop-template';\nimport {AnimationLoop, AnimationLoopProps} from './animation-loop';\nimport type {AnimationProps} from './animation-props';\n\nexport type MakeAnimationLoopProps = Omit<\n  AnimationLoopProps,\n  'onCreateDevice' | 'onInitialize' | 'onRedraw' | 'onFinalize'\n> & {\n  /** List of adapters to use when creating the device */\n  adapters?: Adapter[];\n};\n\n/** Instantiates and runs the render loop */\nexport function makeAnimationLoop(\n  AnimationLoopTemplateCtor: typeof AnimationLoopTemplate,\n  props?: MakeAnimationLoopProps\n): AnimationLoop {\n  let renderLoop: AnimationLoopTemplate | null = null;\n\n  const device =\n    props?.device ||\n    luma.createDevice({id: 'animation-loop', adapters: props?.adapters, createCanvasContext: true});\n\n  // Create an animation loop;\n  const animationLoop = new AnimationLoop({\n    ...props,\n\n    device,\n\n    async onInitialize(animationProps: AnimationProps): Promise<unknown> {\n      // @ts-expect-error abstract to prevent instantiation\n      renderLoop = new AnimationLoopTemplateCtor(animationProps);\n      // Any async loading can be handled here\n      return await renderLoop?.onInitialize(animationProps);\n    },\n\n    onRender: (animationProps: AnimationProps) => renderLoop?.onRender(animationProps),\n\n    onFinalize: (animationProps: AnimationProps) => renderLoop?.onFinalize(animationProps)\n  });\n\n  // @ts-expect-error Hack: adds info for the website to find\n  animationLoop.getInfo = () => {\n    // @ts-ignore\n    // eslint-disable-next-line no-invalid-this\n    return this.AnimationLoopTemplateCtor.info;\n  };\n\n  // Start the loop automatically\n  // animationLoop.start();\n\n  return animationLoop;\n}\n"],"mappings":"AAAA;AACA;AACA;AAEA,SAAQA,IAAI,QAAgB,eAAe;AAE3C,SAAQC,aAAa,QAAqB;AAW1C;AACA,OAAM,SAAUC,iBAAiBA,CAC/BC,yBAAuD,EACvDC,KAA8B;EAE9B,IAAIC,UAAU,GAAiC,IAAI;EAEnD,MAAMC,MAAM,GACVF,KAAK,EAAEE,MAAM,IACbN,IAAI,CAACO,YAAY,CAAC;IAACC,EAAE,EAAE,gBAAgB;IAAEC,QAAQ,EAAEL,KAAK,EAAEK,QAAQ;IAAEC,mBAAmB,EAAE;EAAI,CAAC,CAAC;EAEjG;EACA,MAAMC,aAAa,GAAG,IAAIV,aAAa,CAAC;IACtC,GAAGG,KAAK;IAERE,MAAM;IAEN,MAAMM,YAAYA,CAACC,cAA8B;MAC/C;MACAR,UAAU,GAAG,IAAIF,yBAAyB,CAACU,cAAc,CAAC;MAC1D;MACA,OAAO,MAAMR,UAAU,EAAEO,YAAY,CAACC,cAAc,CAAC;IACvD,CAAC;IAEDC,QAAQ,EAAGD,cAA8B,IAAKR,UAAU,EAAES,QAAQ,CAACD,cAAc,CAAC;IAElFE,UAAU,EAAGF,cAA8B,IAAKR,UAAU,EAAEU,UAAU,CAACF,cAAc;GACtF,CAAC;EAEF;EACAF,aAAa,CAACK,OAAO,GAAG,MAAK;IAC3B;IACA;IACA,OAAO,IAAI,CAACb,yBAAyB,CAACc,IAAI;EAC5C,CAAC;EAED;EACA;EAEA,OAAON,aAAa;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}