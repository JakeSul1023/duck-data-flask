{"ast":null,"code":"// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport Tar from \"./lib/tar/tar.js\";\nconst TAR_BUILDER_OPTIONS = {\n  recordsPerBlock: 20\n};\n/**\n * Build a tar file by adding files\n */\nexport class TarBuilder {\n  static get properties() {\n    return {\n      id: 'tar',\n      name: 'TAR',\n      extensions: ['tar'],\n      mimeTypes: ['application/x-tar'],\n      builder: TarBuilder,\n      options: TAR_BUILDER_OPTIONS\n    };\n  }\n  options;\n  tape;\n  count = 0;\n  constructor(options) {\n    this.options = {\n      ...TAR_BUILDER_OPTIONS,\n      ...options\n    };\n    this.tape = new Tar(this.options.recordsPerBlock);\n  }\n  /** Adds a file to the archive. */\n  addFile(filename, buffer) {\n    this.tape.append(filename, new Uint8Array(buffer));\n    this.count++;\n  }\n  async build() {\n    return new Response(this.tape.save()).arrayBuffer();\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}